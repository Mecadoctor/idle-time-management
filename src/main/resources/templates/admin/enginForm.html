<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head"></head>
<body>
<div th:replace="fragments :: header"></div>

<div class="container">
	<br>

	<div class="row wrapper border-bottom  page-heading">
		<div class="col-sm-6">
			<br>
			<div style="display: -webkit-inline-box;">
				<a class="btn btn-primary btn-rounded" th:href="@{'/admin/chantier/'+${idC}}" style="margin-top:30%;"><i
						class="fa fa-reply"></i></a>
				<h2 class="text-center" th:if="!${edit}">Ajouter Engine à <span th:text="${chantier.nom}"></span></h2>
				<h2 class="text-center" th:if="${edit}">Modifier Engine à <span th:text="${chantier.nom}"></span></h2>
			</div>
			<ol class="breadcrumb">
				<li>
					<a href="/">Accueil</a>
				</li>
				<li  class="active">
					<a href="/admin/">chantiers</a>
				</li>
				<li  class="active">
					<a th:href="'/admin/chantier/'+${chantier.id}" th:text="${chantier.nom}"></a>
				</li>
				<li  class="active">
					<a href="#" th:if="!${edit}">Ajouter un engin</a>
					<a href="#" th:if="${edit}">Modifier un engin</a>
				</li>
			</ol>
		</div>
	</div>
	<br>
	<div class="row">
	<div class="col-md-8 col-md-offset-2 shadow">
	<form class="form-horizontal" method="post" th:object="${engin}" enctype="multipart/form-data" style="margin: 5%">

		<div th:if="${#fields.hasErrors('*')}" class="alert alert-danger">
			<p th:text="#{formError}">Erreur</p>
		</div>

		<input type="hidden"
			   th:name="${_csrf.parameterName}"
			   th:value="${_csrf.token}"/>

		<div th:class="${#fields.hasErrors('marque')} ? 'form-group row has-danger' : 'form-group row'">
			<label class="col-sm-2 col-form-label" for="marque">La marque :</label>
			<div class="col-sm-10">
				<input id="marque" type="text" class="form-control" th:field="*{marque}" th:errorclass="form-control-danger"/>
				<div class="help-block" th:if="${#fields.hasErrors('marque')}">
					<ul>
						<li th:each="err : ${#fields.errors('marque')}" th:text="${err}" />
					</ul>
				</div>
			</div>
		</div>

		<div th:class="${#fields.hasErrors('chauffeur')} ? 'form-group row has-danger' : 'form-group row'">
			<label class="col-sm-2 col-form-label" for="chauffeur">Le chauffeur:</label>
			<div class="col-sm-10">
				<input id="chauffeur" class="form-control" th:field="*{chauffeur}" th:errorclass="form-control-danger"/>
				<div class="help-block" th:if="${#fields.hasErrors('chauffeur')}">
					<ul>
						<li th:each="err : ${#fields.errors('chauffeur')}" th:text="${err}" />
					</ul>
				</div>
			</div>
		</div>

		<div th:class="${#fields.hasErrors('annee')} ? 'form-group row has-danger' : 'form-group row'">
			<label class="col-sm-2 col-form-label" for="annee">L' année :</label>
			<div class="col-sm-10">
				<input id="annee" class="form-control" th:field="*{annee}" th:errorclass="form-control-danger"/>
				<div class="help-block" th:if="${#fields.hasErrors('annee')}">
					<ul>
						<li th:each="err : ${#fields.errors('annee')}" th:text="${err}" />
					</ul>
				</div>
			</div>
		</div>

		<div th:class="${#fields.hasErrors('seuilP')} ? 'form-group row has-danger' : 'form-group row'">
			<label class="col-sm-2 col-form-label" for="seuilP">Seuil de production:</label>
			<div class="col-sm-10">
				<input id="seuilP" class="form-control" th:field="*{seuilP}" th:errorclass="form-control-danger"/>
				<div class="help-block" th:if="${#fields.hasErrors('seuilP')}">
					<ul>
						<li th:each="err : ${#fields.errors('seuilP')}" th:text="${err}" />
					</ul>
				</div>
			</div>
		</div>

		<div th:class="${#fields.hasErrors('seuilR')} ? 'form-group row has-danger' : 'form-group row'">
			<label class="col-sm-2 col-form-label" for="seuilR">Seuil de ralentie :</label>
			<div class="col-sm-10">
				<input id="seuilR" class="form-control" th:field="*{seuilR}" th:errorclass="form-control-danger"/>
				<div class="help-block" th:if="${#fields.hasErrors('seuilR')}">
					<ul>
						<li th:each="err : ${#fields.errors('seuilR')}" th:text="${err}" />
					</ul>
				</div>
			</div>
		</div>

		<div th:class="${#fields.hasErrors('temps')} ? 'form-group row has-danger' : 'form-group row'">
			<label class="col-sm-2 col-form-label" for="temps">Le temps :</label>
			<div class="col-sm-10">
				<input id="temps" class="form-control" th:field="*{temps}" th:errorclass="form-control-danger"/>
				<div class="help-block" th:if="${#fields.hasErrors('temps')}">
					<ul>
						<li th:each="err : ${#fields.errors('temps')}" th:text="${err}" />
					</ul>
				</div>
			</div>
		</div>

		<div th:if="!${edit}" th:class="${fileError} ? 'form-group row has-danger' : 'form-group row'">
			<label class="col-sm-2 col-form-label" for="file">La photo :</label>
			<div class="col-sm-10">
				<label class="custom-file">
					<input type="file" id="file" name="file" accept="image/*" class="custom-file-input">
					<span class="custom-file-control"></span>
				</label>
				<div class="help-block" th:if="${fileError}">
					<p th:text="${fileError}"></p>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-sm-2"></div>
			<div class="col-sm-10">
				<button th:if="!${edit}" type="submit" class="btn btn-primary btn-block">Ajouter</button>
				<button th:if="${edit}" type="submit" class="btn btn-primary btn-block">Modifier</button>
			</div>
		</div>
	</form>
	</div>
	</div>

</div>
</body>
</html>